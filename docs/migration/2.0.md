# 2.0 Migration

## Beemo configuration has moved

Previously, configuration was either defined in a `configs/beemo.js` file, or a `beemo` block within
`package.json`. Configuration must now be defined in `.config/beemo.js` (or `.json`, `.yaml`, etc).
Package level config has been removed entirely.

```js
// .config/beemo.js
module.exports = {
  module: '<config-module>',
};
```

## Driver overrides have been removed from `package.json`

The ability to configure drivers in a `beemo.<driver>` block within `package.json` has been removed.
Instead, configure the driver at `.config/beemo/<driver>.js` (or `.json`, `.yaml`, etc).

```json
// Before - package.json
{
  "beemo": {
    "eslint": {
      "rules": {
        "no-console": "off"
      }
    }
  }
}
```

```js
// After - .config/beemo/eslint.js
module.exports = {
  rules: {
    'no-console': 'off',
  },
};
```

## Drivers configuration structure has changed

When configuring drivers with the `drivers` setting, either supply a list of names.

```js
// .config/beemo.js
module.exports = {
  module: '<config-module>',
  drivers: ['babel', 'jest'],
};
```

Or an object of names that map to booleans (enable or disable the driver), or an options object.

```js
// .config/beemo.js
module.exports = {
  module: '<config-module>',
  drivers: {
    babel: true,
    jest: {
      env: {
        NODE_ENV: 'test',
      },
    },
  },
};
```

The old format of mixing strings and objects within a list is no longer supported.

## Driver and script modules must export a factory function

If you're using custom driver and script modules, they must now default export a function that
returns a class instance, instead of exporting a class declaration.

```ts
// Before
import CustomDriver from './CustomDriver';

export default CustomDriver;
```

```ts
// After
import CustomDriver from './CustomDriver';

export default function(options) {
  return new CustomDriver(options);
}
```
